{% extends 'vendors/base.html' %}
{% load bootstrap4 %}
{% load static %}


{% block vendor_content %}
<link rel="stylesheet" href="{%static 'css/lightbox.css' %}">
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
<div class="page-container">
  <div class="profile-head">
    <div class="background-img card">
        <img src="{% static 'images/background.jpg' %}" alt="">
        <div class="card-img-overlay">
            <i class="fas fa-camera profile-edit"></i>
        </div>
    </div>
    <div class="vendor-data">
        <img class="vendor-image" src="{{vendor.logo.url}}" alt="">
        <h3 class="vendor-name">Vendor Name</h3>
        <div class="vendor-rating">
            {% ifequal vendor.review_int 1 %}
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn "></span>
            <span class="fa fa-star my-btn "></span>
            <span class="fa fa-star my-btn "></span>
            <span class="fa fa-star my-btn"></span>
            {% endifequal %}

            {% ifequal vendor.review_int 2 %}
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn "></span>
            <span class="fa fa-star my-btn "></span>
            <span class="fa fa-star my-btn"></span>
            {% endifequal %}

            {% ifequal vendor.review_int 3 %}
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn "></span>
            <span class="fa fa-star my-btn"></span>
            {% endifequal %}

            {% ifequal vendor.review_int 4 %}
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn"></span>
            {% endifequal %}

            {% ifequal vendor.review_int 5 %}
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            <span class="fa fa-star my-btn checked"></span>
            {% endifequal %}
          </div>
        </div>
    </div>
</div>
  </div>
  <div class="vendor-info container-fluid">
      <div class="basic-info">
          <div class="vendor-location">
              <h4><span><i class="fas fa-map-marker-alt"></i></span> Vendor Address,&nbsp;<span>Detail</span>
              </h4>
          </div>
          <div>
              <hr class="my-2">
          </div>
          <h4>Contact</h4>
          <div class="contact-no"><span><i class="fas fa-mobile"></i></span> Vendor Phone</div>
          <div class="contact-no"><span><i class="fas fa-phone-square-alt"></i></span> Vendor Office</div>
          <div class="vendor-email"><span><i class="fas fa-envelope"></i></span> Vendor Email</div>
          <div>
              <hr class="my-2">
          </div>
          <h4>About</h4>
          <div class="vendor-description">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sed maxime
              rerum necessitatibus ducimus eveniet neque, doloremque amet nulla veritatis suscipit soluta esse
              repellat tempora pariatur sunt quia laborum labore obcaecati!
              <span><i class="fas fa-pen" style="float: right;"></i></span>
          </div>
          <button class="add-to-checklist">Add to Checklist</button>
      </div>
      <div class="detailed-info">
          <div class="info-tabs">
              <ul>
                  <li onclick="tabs(0)" class="portfolio active">Portfolio</li>
                  <li onclick="tabs(1)" class="pricing">Pricing</li>
                  <li onclick="tabs(2)" class="reviews">Reviews</li>
              </ul>
          </div>
          <div class="detailed-tabs">
              <div class="detailed-portfolio tab">
                  <div class="container-fluid">
                      <div class="portfolio-row">
                          <div class="portfolio-column">
                              <a href="images/background.jpg" data-lightbox="mygallery"><img
                                      src="images/background.jpg" alt=""></a>
                              <a href="images/paimon.jpg" data-lightbox="mygallery"><img
                                      src="images/paimon.jpg" alt=""></a>
                              <a href="images/filler1.jpg" data-lightbox="mygallery"><img
                                      src="images/filler1.jpg" alt=""></a>
                              <a href="images/profimg.png" data-lightbox="mygallery"><img
                                      src="images/profimg.png" alt=""></a>
                          </div>
                          <div class="portfolio-column">
                              <a href="images/profimg.png" data-lightbox="mygallery"><img
                                      src="images/profimg.png" alt=""></a>
                              <a href="images/background.jpg" data-lightbox="mygallery"><img
                                      src="images/background.jpg" alt=""></a>
                              <a href="images/paimon.jpg" data-lightbox="mygallery"><img
                                      src="images/paimon.jpg" alt=""></a>
                              <a href="images/filler1.jpg" data-lightbox="mygallery"><img
                                      src="images/filler1.jpg" alt=""></a>
                          </div>
                          <div class="portfolio-column">
                              <a href="images/filler1.jpg" data-lightbox="mygallery"><img
                                      src="images/filler1.jpg" alt=""></a>
                              <a href="images/profimg.png" data-lightbox="mygallery"><img
                                      src="images/profimg.png" alt=""></a>
                              <a href="images/background.jpg" data-lightbox="mygallery"><img
                                      src="images/background.jpg" alt=""></a>
                              <a href="images/paimon.jpg" data-lightbox="mygallery"><img
                                      src="images/paimon.jpg" alt=""></a>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="detailed-pricing tab">Pricing</div>
              <div class="detailed-rewiews tab">
                {% include 'vendors/reviews.html' %}

                  <!-- <div class="card mb-3">
                      <div class="review-input">
                          <h3 class="">Your Review</h3>
                          <textarea class="form-control mb-3" id="" rows="3"
                              placeholder="Post your review here"></textarea>
                          <div class="rating-post">
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                          </div>
                      </div>
                  </div>
                  <div class="card">
                      <div class="customer-details">
                          <div class="customer-pic">
                              <img src="images/profimg.png" alt="">
                          </div>
                          <div class="customer-name">
                              <h5>Username</h5>
                              <p>11/10/2012</p>
                          </div>
                          <div class="rating">
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                              <i class="fas fa-star"></i>
                          </div>
                      </div>
                      <div class="customer-review">
                          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Enim facere nesciunt
                              libero et tempora consequatur, repellendus nemo, accusamus sequi obcaecati earum
                              fugiat! Sit sunt culpa dignissimos similique sed animi tempora.
                          </p>
                      </div>
                  </div> -->
              </div>
          </div>
      </div>
  </div>
</div>


    {#{{vendor.slug}}#}

    <div class="container">

    <div class="cover-image">


    </div>

    <!-- this div tag contains vendor's profile picture and cover pictures inside it  -->
    <div class="pictures">
        <img src="{{ vendor.cover_image.url }}" class="cover_pic" alt="Cover Image">
        <img src="{{ vendor.logo.url }}" class="profile_pic" alt="Logo">
        <span class="vendor_name">{{vendor.vendor_name}}</span>
    </div>
    
    {% if user.is_vendor and vendor.user == user %}
      <div class="update-logo">
        <button type="button" class="btn btn-primary" id="logo-button-show">Edit Logo</button>
        <button type="button" class="btn btn-primary" id="logo-button-hide">Close</button>
        <form method="POST" id="logo-form" action="{% url 'vendors:profile' slug=vendor.user.username %}" enctype="multipart/form-data">
          {% csrf_token %}
          {% bootstrap_form update_logo_form %}
          <input type="submit" class="btn btn-primary" name="update_logo" value="Update Logo">
        </form>
      </div>

      <div class="update-cover-image">
        <button type="button" class="btn btn-primary" id="cover-button-show">Edit Cover Image</button>
        <button type="button" class="btn btn-primary" id="cover-button-hide">Close</button>
        <form method="POST" id="cover-form" action="{% url 'vendors:profile' slug=vendor.user.username %}" enctype="multipart/form-data">
          {% csrf_token %}
          {% bootstrap_form update_cover_form %}
          <input type="submit" class="btn btn-primary" name="update_cover" value="Update Cover Image">
        </form>
      </div>
    {% endif %}
  
  
  {% if user.is_customer %}
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#staticBackdrop">
        Add Vendor to Checklist
      </button>
      <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Add Vendor to Checklist</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{% url 'vendors:profile' slug=vendor.user.username %}">
                    {% csrf_token %}    
                    {% bootstrap_form add_checklist_form %}
                    <input type="submit" class="btn btn-primary" 
                    value="Add To Checklist" name="add_to_checklist">
                </form>
            </div>
            </div>
          </div>
        </div>
      </div>   
      <!-- Modal -->
  {% endif %}
    

  <div class="main-info">
    Category: {{vendor.category}}
  </div>
  <hr>
  <div class="address">
    
    <p>Address:</p>
    <span>
      {% if vendor.address %}
        {{vendor.address}}
      {% else %}
        <i>No address provided.</i>
      {% endif %}
    </span> 

    {% if user.is_vendor and vendor.user == user %}
      <button type="button" class="btn btn-primary" id="address-button-show">Edit Address</button>
      <button type="button" class="btn btn-primary" id="address-button-hide">Close</button>
      <form method="POST" id="address-form" action="{% url 'vendors:profile' slug=vendor.user.username %}">
        {% csrf_token %}
        {% bootstrap_form update_address_form %}
        <input type="submit" class="btn btn-primary" name="update_address" value="Update Address">
      </form>
    {% endif %}

  </div>
  <br>


  <div class="contact">
    
    <p>Contact:</p>
    <span>
      {% if vendor.contact %}
        {{vendor.contact}}
      {% else %}
        <i>No contact info provided.</i>
      {% endif %}
    </span> 

    {% if user.is_vendor and vendor.user == user %}
      <button type="button" class="btn btn-primary" id="contact-button-show">Edit Contact</button>
      <button type="button" class="btn btn-primary" id="contact-button-hide">Close</button>
      <form method="POST" id="contact-form" action="{% url 'vendors:profile' slug=vendor.user.username %}">
        {% csrf_token %}
        {% bootstrap_form update_contact_form %}
        <input type="submit" class="btn btn-primary" name="update_contact" value="Update Contact">
      </form>
    {% endif %}

  </div>
  <br>


  <div class="about">
      <h4>About:</h4>
      <span>
        
        {% if vendor.about %}
          {{vendor.about|safe}}
        {% else %}
          <i>No Description.</i>
        {% endif %}
          
        
      </span>
      
      {% if user.is_vendor and vendor.user == user %}
      <button type="button" class="btn btn-primary" id="about-button-show">Edit About</button>
      <button type="button" class="btn btn-primary" id="about-button-hide">Close</button>
      <form method="POST" id="about-form" action="{% url 'vendors:profile' slug=vendor.user.username %}">
        {% csrf_token %}
        {% bootstrap_form update_about_form %}
        <input type="submit" class="btn btn-primary" name="update_about" value="Update About">
      </form>
      {% endif %}
  </div>
  <div class="tag">
    Tags:
    {% for tag in tags %}
      {{tag}}
    {% endfor %} 
    
    {% if user.is_vendor and vendor.user.username == user.username %}
      <button type="button" class="btn btn-primary" id="tag-button-show">Add Tags</button>
      <button type="button" class="btn btn-primary" id="tag-button-hide">Close</button>
      <form method="POST" id="tag-form" action="{% url 'vendors:profile' slug=vendor.user.username %}">
        {% csrf_token %}
        {% bootstrap_form add_tag_form %}
        <input type="submit" class="btn btn-primary" name="add_tag" value="Add">
      </form>
    {% endif %}
  </div>
  <div class="images">
    <h4>Images:</h4>
    <div>
    {% for image in vendor_images %}
      <img src="{{ image.image.url }}" class="vendor_images" width="150" height="150" alt="Vendor Image">
      {% if user.is_vendor and vendor.user == user %}
        <a href="{% url 'vendors:image_delete' pk=image.pk %}" class="icon">
          <span class="material-icons delete">clear</span>
        </a>
      {% endif %}
        
    {% endfor %}
    </div>

    {% if user.is_vendor and vendor.user == user %}
    <form method="POST" id="image-form" action="{% url 'vendors:profile' slug=vendor.user.username %}" enctype="multipart/form-data">
      {% csrf_token %}
      {% bootstrap_form add_image_form %}
      <input type="submit" class="btn btn-primary" name="add_image" value="Add">
    </form>
    {% endif %}
  </div>
  <div class="pricing">
    <h4>Pricing:</h4>
    <div>
      {% for pricing in vendor_pricing %}
        <p>
          {{pricing.description}} &nbsp;&nbsp;&nbsp; Rs. {{pricing.price}}
          {% if user.is_vendor and vendor.user == user %}
            <a href="{% url 'vendors:pricing_delete' pk=pricing.pk %}" class="icon">
              <span class="material-icons delete">clear</span>
            </a>
          {% endif %}
        </p>
      {% endfor %}
      
      {% if user.is_vendor and vendor.user == user %}
      <button type="button" class="btn btn-primary" id="pricing-button-show">Add Pricing</button>
      <button type="button" class="btn btn-primary" id="pricing-button-hide">Close</button>
      <form method="POST" id="pricing-form" action="{% url 'vendors:profile' slug=vendor.user.username %}">
        {% csrf_token %}
        {{add_pricing_form}}
        <input type="submit" class="btn btn-primary" name="add_pricing" value="Add">
      </form>
      {% endif %}
    </div>    
  </div>



    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="{% static 'js/lightbox.js' %}"></script>
    <script src="{% static 'js/vendors.js' %}"></script>
    <script>

        $(document).ready(function () {

          $("#logo-form").hide();
          $("#logo-button-show").show();
          $("#logo-button-hide").hide();

          $("#cover-form").hide();
          $("#cover-button-show").show();
          $("#cover-button-hide").hide();

          $("#about-form").hide();
          $("#about-button-show").show();
          $("#about-button-hide").hide();

          $("#address-form").hide();
          $("#address-button-show").show();
          $("#address-button-hide").hide();

          $("#contact-form").hide();
          $("#contact-button-show").show();
          $("#contact-button-hide").hide();

          $("#pricing-form").hide();
          $("#pricing-button-show").show();
          $("#pricing-button-hide").hide();

          $("#tag-form").hide();
          $("#tag-button-show").show();
          $("#tag-button-hide").hide();

          $("#logo-button-show").click(function() {
            $("#logo-form").show();
            $("#logo-button-hide").show();
            $("#logo-button-show").hide();
          });

          $("#logo-button-hide").click(function() {
            $("#logo-form").hide();
            $("#logo-button-show").show();
            $("#logo-button-hide").hide();
          });

          $("#cover-button-show").click(function() {
            $("#cover-form").show();
            $("#cover-button-hide").show();
            $("#cover-button-show").hide();
          });

          $("#cover-button-hide").click(function() {
            $("#cover-form").hide();
            $("#cover-button-show").show();
            $("#cover-button-hide").hide();
          });

          $("#about-button-show").click(function() {
            $("#about-form").show();
            $("#about-button-hide").show();
            $("#about-button-show").hide();
          });

          $("#about-button-hide").click(function() {
            $("#about-form").hide();
            $("#about-button-show").show();
            $("#about-button-hide").hide();
          });

          $("#address-button-show").click(function() {
            $("#address-form").show();
            $("#address-button-hide").show();
            $("#address-button-show").hide();
          });

          $("#address-button-hide").click(function() {
            $("#address-form").hide();
            $("#address-button-show").show();
            $("#address-button-hide").hide();
          });

          $("#contact-button-show").click(function() {
            $("#contact-form").show();
            $("#contact-button-hide").show();
            $("#contact-button-show").hide();
          });

          $("#contact-button-hide").click(function() {
            $("#contact-form").hide();
            $("#contact-button-show").show();
            $("#contact-button-hide").hide();
          });

          $("#pricing-button-show").click(function() {
            $("#pricing-form").show();
            $("#pricing-button-hide").show();
            $("#pricing-button-show").hide();
          });

          $("#pricing-button-hide").click(function() {
            $("#pricing-form").hide();
            $("#pricing-button-show").show();
            $("#pricing-button-hide").hide();
          });

          $("#tag-button-show").click(function() {
            $("#tag-form").show();
            $("#tag-button-hide").show();
            $("#tag-button-show").hide();
          });

          $("#tag-button-hide").click(function() {
            $("#tag-form").hide();
            $("#tag-button-show").show();
            $("#tag-button-hide").hide();
          });

        })
    </script>
{% endblock vendor_content %}